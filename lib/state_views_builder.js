// Generated by CoffeeScript 1.11.1
(function() {
  var MnViewConfig, Resolvable, ResolveContext, ViewService, hasAnyKey, ref, services, viewConfigId;

  ref = require('ui-router-core'), services = ref.services, ViewService = ref.ViewService, ResolveContext = ref.ResolveContext, Resolvable = ref.Resolvable;

  viewConfigId = 0;

  hasAnyKey = function(keys, obj) {
    return _.reduce(keys, (function(memo, key) {
      return memo || (obj[key] != null);
    }), false);
  };

  exports.mnViewsBuilder = function(state) {
    var keys, views, viewsObject;
    if (!state.parent) {
      return;
    }
    keys = ['view', 'controller'];
    views = {};
    viewsObject = state.views || {
      $default: _.pick(state, keys)
    };
    _.each(viewsObject, function(config, name) {
      var i, key, len, normalized, results;
      name = name || '$default';
      config.resolveAs = config.resolveAs || '$resolve';
      config.$type = 'backbone';
      config.$context = state;
      config.$name = name;
      normalized = ViewService.normalizeUIViewTarget(config.$context, config.$name);
      config.$uiViewName = normalized.uiViewName;
      config.$uiViewContextAnchor = normalized.uiViewContextAnchor;
      views[name] = config;
      results = [];
      for (i = 0, len = keys.length; i < len; i++) {
        key = keys[i];
        if (config.hasOwnProperty(key) && (config[key] == null)) {
          results.push(console.warn("ui-router state: " + state.name + " - null or undefined value for '" + key + "' in '" + config.$name + "'"));
        } else {
          results.push(void 0);
        }
      }
      return results;
    });
    return views;
  };

  exports.MnViewConfig = MnViewConfig = (function() {
    function MnViewConfig(path, viewDecl) {
      this.path = path;
      this.viewDecl = viewDecl;
      this.loaded = true;
      this.$id = viewConfigId++;
    }

    MnViewConfig.prototype.load = function() {
      return services.$q.when(this);
    };

    return MnViewConfig;

  })();

}).call(this);
